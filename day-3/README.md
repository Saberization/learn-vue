## 一、组件 components

### 1. 什么是组件？

组件(components) 是 vue.js 最强大的功能之一，组件可以扩展 HTML，封装可重用的代码。

组件是自定义元素(对象)

### 2. 定义组件的方式

方式一：先创建组件构造器(Vue.extend)，由组件构造器创建组件(Vue.compoent)。

方式二：直接创建组件(Vue.compoent)

### 3. 组件的分类

分类：全局组件、局部组件

### 4. 引用模板

将组件的内容放到模板 `<template></template>` 标签中

`<template></template>` 标签中只能有，并且只能有一个根元素

### 5. 动态组件

`<component :is="componentID"></component>` 组件，多个组件使用同一个挂载点，然后动态的在它们之间切换显示，__每次都会重新渲染创建组件__。 [component](https://cn.vuejs.org/v2/api/#component)

`<keep-alive></keep-alive>` 组件，用来保存当前非活动组件，__可以保留状态，避免重新渲染__。

## 二、 组件间数据传递

### 1. 父子组件

在一个组件内部定义另一个组件，称为父子组件

__子组件只能在父组件内部使用__

默认情况下，子组件无法访问父组件中的数据，每个组件实例的作用域都是互相独立的。

### 2. 组件间数据的传递（通信）

#### 2.1 子组件访问父组件的数据

a) 在调用子组时，绑定想要获取父组件中的数据

b) 在子组件内部，使用 `props` 选项来声明获取的数据，即接收来自父组件的数据。

总结：父组件通过给子组件的标签 `v-bind` 绑定属性，子组件中通过 `props` 去接收传递的数据。

注意：组件中的数据总共有三种形式：`data`、`props`、`computed`

#### 2.2 父组件访问子组件的数据

a) 在子组件中使用 `vm.$emit(事件名, 数据)` 触发一个自定义事件，事件名自定义。

b) 父组件在使用子组件的地方监听子组件触发的事件(`@evt-name=method`)，并在父组件中定义方法，用来获取数据。

总结：子组件通过 `events(this.$emit)` 给父组件发送消息，实际上就是子组件把自己的数据发送到父组件。

### 3. 单项数据流

`props` 是单项绑定的，当父组件的属性发生变化时，将传导给子组件，但是不会反过来。并且不允许子组件直接修改父组件中的数据，会报错

**解决方式：**

方式1：如果子组件想把它作为局部数据来使用，可以将数据存入另一个变量中再操作，不影响父组件中的数据。

方式2：如果子组件想修改数据，并且还需要同步更新到父组件，有两个方法：

> a. 使用 `.sync` 修饰符 (1.0版本中支持，2.0版本不支持，2.3版本又开始支持了)，并且需要显示的去触发一个事件 `this.$emit('update:name', newdata);`
>
> b. 可以将父组件中的数据包装成对象，然后再子组件中修改对象的属性(**注意在 JavaScript 中对象和数组是通过引用传入的，所以对于一个数组或对象类型的 prop 来说，在子组件中改变这个对象或数组本身将会影响到父组件的状态。**)

推荐使用 `b` 方案，将数据包装成对象或数组来实现，父子组件同步数据。

### 4. 非父子组件间的通信

非父子组件间的通信，可以通过一个空的 `Vue` 实例作为中央事件中线(事件中心)，用它来触发事件和监听事件。

```js
var bas = new Vue();

// 先触发事件 -- 要发送数据的组件
bas.$emit(事件名, 数据);

// 监听事件 -- 要接受数据的组件
bas.$emit(事件名, data => {});
```

## 三、slot内容分发

本意：位置、槽

作用：用来获取组件中的原内容，类似 ag 中的 transclude 指定。